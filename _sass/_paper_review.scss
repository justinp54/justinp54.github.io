/*******************************************************************************
 * Paper Review Post Styles
 * 스타일은 paper-review 카테고리를 가진 포스트에만 적용됩니다.
 ******************************************************************************/

.paper-review {
  // 본문 폰트 크기 및 줄간격
  font-size: 1.0625rem; // 17px
  line-height: 1.7;
  max-width: 70rem;
  margin: 0 auto;
  padding: 0 1rem;
  
  // 헤딩 크기 및 간격 조정
  h1 {
    font-size: 1.75rem;
    font-weight: 600;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    line-height: 1.3;
  }
  
  h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 0.875rem;
    line-height: 1.35;
  }
  
  h3 {
    font-size: 1.25rem;
    font-weight: 500;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    line-height: 1.4;
  }
  
  h4 {
    font-size: 1.125rem;
    font-weight: 500;
    margin-top: 1.25rem;
    margin-bottom: 0.625rem;
  }
  
  // 문단 간격
  p {
    margin-top: 1rem;
    margin-bottom: 1rem;
    line-height: 1.7;
  }
  
  // 리스트 조정
  ul, ol {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding-left: 2rem;
    line-height: 1.7;
    
    li {
      margin: 0.5rem 0;
    }
  }
  
  // 인용문 조정
  blockquote {
    font-size: 1rem;
    line-height: 1.65;
    margin: 1.5rem 0;
    padding: 1em 1.5em;
  }
  
  // 논문 정보 블록 (디자인안 A: Minimal Meta Row - 기본)
  // 다른 디자인안 사용 시: .paper-info-block.card 또는 .paper-info-block.callout 클래스 추가
  .paper-info-block {
    // 디자인안 A: Minimal Meta Row (기본) - 가시성 개선 버전
    // 라이트 모드: 약간 어두운 배경, 다크 모드: 약간 밝은 배경
    background: rgba(0, 0, 0, 0.025);
    border: none;
    padding: 0.875rem 1.125rem;
    margin: 1.5rem 0 2rem 0;
    border-radius: 6px;
    font-size: 0.9375rem; // 15px (기본 14px에서 증가)
    line-height: 1.4;
    color: var(--global-text-color);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    
    // 첫 번째 줄: Venue/Year (약하게)
    > p:first-child {
      margin: 0 0 0.3rem 0;
      color: var(--global-text-color-light);
      font-weight: 400;
      font-size: 0.875rem; // 14px (기본 13px에서 증가)
      
      strong {
        font-weight: 400;
        color: var(--global-text-color-light);
      }
    }
    
    // 두 번째 줄: Authors (주)
    > p:nth-child(2) {
      margin: 0 0 0.3rem 0;
      font-weight: 500;
      font-size: 1rem; // 16px (기본 15px에서 증가)
      
      strong {
        font-weight: 500;
        color: var(--global-text-color);
      }
    }
    
    // 세 번째 줄: Affiliation (약하게)
    > p:nth-child(3) {
      margin: 0 0 0.4rem 0;
      color: var(--global-text-color-light);
      font-weight: 400;
      font-size: 0.875rem; // 14px (기본 13px에서 증가)
      
      strong {
        font-weight: 400;
        color: var(--global-text-color-light);
      }
    }
    
    // 네 번째 줄: Links (보조)
    > p:nth-child(4) {
      margin: 0;
      
      a {
        display: inline-block;
        color: #0066cc;
        text-decoration: none;
        font-size: 0.875rem; // 14px (기본 13px에서 증가)
        padding: 0.2rem 0.5rem;
        margin-right: 0.5rem;
        border-radius: 3px;
        background: transparent;
        transition: all 0.2s ease;
        
        &:hover {
          color: var(--global-theme-color);
          background: rgba(9, 173, 148, 0.1);
          text-decoration: none;
        }
      }
    }
    
    // 다섯 번째 줄: Date (약하게)
    > p:nth-child(5) {
      margin: 0.3rem 0 0 0;
      color: var(--global-text-color-light);
      font-weight: 400;
      font-size: 0.875rem; // 14px (기본 13px에서 증가)
      
      strong {
        font-weight: 400;
        color: var(--global-text-color-light);
      }
    }
    
    // 디자인안 B: Subtle Card (클래스 추가 시)
    &.card {
      background: var(--global-bg-color);
      border: 1px solid var(--global-divider-color);
      border-left: 2px solid #e0e0e0;
      padding: 1rem 1.25rem;
      border-radius: 4px;
      
      > p {
        margin: 0.4rem 0;
        
        &:first-child {
          margin-top: 0;
        }
        
        &:last-child {
          margin-bottom: 0;
        }
      }
      
      a {
        color: #0066cc;
        text-decoration: none;
        margin-right: 0.5rem;
        
        &:hover {
          color: var(--global-theme-color);
          text-decoration: underline;
        }
      }
      
      strong {
        font-weight: 500;
        color: var(--global-text-color);
      }
    }
    
    // 디자인안 C: Callout only (클래스 추가 시)
    &.callout {
      background: transparent;
      border: none;
      padding: 0;
      
      > p {
        margin: 0.3rem 0;
        font-size: 0.8125rem;
        color: var(--global-text-color-light);
        
        strong {
          font-weight: 400;
          color: var(--global-text-color-light);
        }
      }
      
      a {
        color: #0066cc;
        text-decoration: none;
        font-size: 0.75rem;
        
        &:hover {
          text-decoration: underline;
        }
      }
    }
    
    // 모바일 반응형
    @media (max-width: 768px) {
      font-size: 0.8125rem;
      
      > p {
        word-break: break-word;
      }
      
      a {
        display: inline-block;
        margin-top: 0.25rem;
      }
    }
  }
  
  // Callout 스타일 (디자인안 C용, 또는 일반적으로 사용 가능)
  .paper-callout {
    background: var(--global-bg-color);
    border-left: 4px solid var(--global-theme-color);
    margin: 2rem 0;
    padding: 1rem 1.25rem;
    border-radius: 4px;
    
    h4 {
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      color: var(--global-theme-color);
    }
    
    p {
      margin: 0.5rem 0;
      font-size: 0.9375rem;
      line-height: 1.6;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
  }
  
  // 강조 텍스트
  strong {
    font-weight: 600;
  }
  
  // 수평선
  hr {
    margin: 2rem 0;
    border-top: 1px solid var(--global-divider-color);
  }
  
  // MathJax 가독성 개선
  .mjx-container {
    overflow-x: auto;
    overflow-y: hidden;
    max-width: 100%;
    
    // Display math (블록 수식)
    &[jax="CHTML"][display="true"] {
      margin: 1.5rem 0;
      overflow-x: auto;
      overflow-y: hidden;
      max-width: 100%;
      padding: 0.5rem 0;
      
      // 긴 수식이 컨테이너를 넘지 않도록
      & > span {
        display: inline-block;
        max-width: 100%;
        overflow-x: auto;
      }
    }
    
    // Inline math (인라인 수식)
    &:not([display="true"]) {
      font-size: 1em;
      vertical-align: baseline;
    }
  }
  
  // 수식이 포함된 문단
  p .mjx-container {
    display: inline-block;
    vertical-align: middle;
  }
  
  // TOC 스타일
  #table-of-contents.paper-review-toc {
    margin: 2rem 0;
    padding: 1.25rem 1.5rem;
    background-color: var(--global-code-bg-color);
    border-radius: 8px;
    border-left: 3px solid var(--global-theme-color);
    
    h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin-top: 0;
      margin-bottom: 1rem;
      color: var(--global-text-color);
    }
    
    ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
      
      li {
        margin: 0.5rem 0;
        padding-left: 0;
        
        a {
          color: var(--global-text-color);
          text-decoration: none;
          
          &:hover {
            color: var(--global-theme-color);
            text-decoration: underline;
          }
        }
      }
      
      // 중첩된 리스트 (H3)
      ul {
        padding-left: 1.5rem;
        margin-top: 0.25rem;
        margin-bottom: 0.25rem;
        
        li {
          margin: 0.375rem 0;
          font-size: 0.9375rem;
        }
      }
    }
  }
  
  // 이미지 및 Figure
  img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 1.5rem auto;
    border-radius: 4px;
  }
  
  figure {
    margin: 2rem 0;
    text-align: center;
    
    img {
      margin: 0 auto 0.75rem;
    }
    
    figcaption,
    .caption {
      font-size: 0.875rem;
      color: var(--global-text-color-light);
      margin-top: 0.5rem;
      text-align: center;
      font-style: italic;
      line-height: 1.5;
    }
  }
  
  // 논문 캡처 이미지를 위한 paper-figure 스타일
  figure.paper-figure {
    margin: 2.5rem 0;
    text-align: center;
    
    img {
      width: 100%;
      max-width: 100%;
      height: auto;
      margin: 0 auto 1rem;
      border: 1px solid var(--global-divider-color);
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    figcaption {
      font-size: 0.9375rem;
      color: var(--global-text-color);
      margin-top: 0.75rem;
      text-align: center;
      font-weight: 500;
      font-style: normal;
      line-height: 1.5;
    }
  }
  
  // Algorithm/Figure 설명 박스
  .reading-guide {
    margin: 1.5rem 0;
    padding: 1.25rem 1.5rem;
    background-color: var(--global-code-bg-color);
    border-left: 3px solid var(--global-theme-color);
    border-radius: 4px;
    
    h4 {
      margin-top: 0;
      margin-bottom: 0.75rem;
      font-size: 1.0625rem;
      font-weight: 600;
      color: var(--global-theme-color);
    }
    
    p {
      margin: 0.5rem 0;
      font-size: 0.9375rem;
      line-height: 1.6;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
    
    ul, ol {
      margin: 0.75rem 0;
      padding-left: 1.5rem;
      
      li {
        margin: 0.5rem 0;
        font-size: 0.9375rem;
        line-height: 1.6;
      }
    }
  }
  
  // "How to Read This Algorithm" / "What This Shows" 섹션
  h3 + p:first-of-type {
    margin-top: 1rem;
  }
  
  // Algorithm 설명 리스트 스타일
  figure.paper-figure + h3,
  figure.paper-figure + h4 {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  // Algorithm 설명의 리스트 항목 스타일
  figure.paper-figure ~ ul,
  figure.paper-figure ~ ol {
    margin: 1rem 0;
    padding-left: 1.75rem;
    
    li {
      margin: 0.75rem 0;
      font-size: 0.9375rem;
      line-height: 1.7;
      
      strong {
        font-weight: 600;
        color: var(--global-text-color);
      }
    }
  }
  
  // 테이블
  table {
    width: 100%;
    margin: 1.5rem 0;
    border-collapse: collapse;
    font-size: 0.9375rem;
    overflow-x: auto;
    display: block;
    
    @media (min-width: 768px) {
      display: table;
    }
    
    thead {
      background-color: var(--global-code-bg-color);
    }
    
    th, td {
      padding: 0.625rem 0.875rem;
      border: 1px solid var(--global-divider-color);
      text-align: left;
    }
    
    th {
      background-color: var(--global-code-bg-color);
      font-weight: 600;
      color: var(--global-text-color);
    }
    
    tbody {
      tr {
        &:nth-child(even) {
          background-color: var(--global-code-bg-color);
        }
        
        &:hover {
          background-color: rgba(var(--global-theme-color-rgb, 9, 173, 148), 0.05);
        }
      }
    }
  }
  
  // 테이블 캡션
  table + .caption,
  table + p.caption {
    font-size: 0.875rem;
    color: var(--global-text-color-light);
    margin-top: 0.5rem;
    text-align: center;
    font-style: italic;
  }
  
  // 코드블록
  pre,
  figure.highlight {
    font-size: 0.875rem;
    line-height: 1.6;
    padding: 1rem 1.25rem;
    margin: 1.25rem 0;
    border-radius: 6px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    
    code {
      font-size: 0.875rem;
      padding: 0;
      background-color: transparent;
    }
  }
  
  // 인라인 코드
  code:not(pre code) {
    font-size: 0.9em;
    padding: 0.2em 0.4em;
    border-radius: 3px;
  }
}

// 인쇄 모드 스타일
@media print {
  .paper-review {
    max-width: 100%;
    font-size: 10pt;
    line-height: 1.6;
    padding: 0;
    
    // 헤더/네비게이션/푸터 숨김
    header,
    nav,
    footer,
    .post-header,
    .post-tags,
    .post-meta {
      display: none !important;
    }
    
    // TOC는 인쇄 시 유지 (선택사항)
    #table-of-contents.paper-review-toc {
      page-break-after: always;
      background-color: transparent;
      border: none;
      padding: 0;
    }
    
    // 페이지 나눔 개선
    h1, h2, h3 {
      page-break-after: avoid;
    }
    
    // 이미지와 캡션이 함께
    figure {
      page-break-inside: avoid;
    }
    
    // 테이블이 페이지를 넘지 않도록
    table {
      page-break-inside: avoid;
    }
    
    // 코드블록
    pre, figure.highlight {
      page-break-inside: avoid;
      font-size: 9pt;
    }
  }
}

// 다크 모드에서 paper-info-block 배경 조정
html[data-theme="dark"] .paper-review .paper-info-block {
  background: rgba(255, 255, 255, 0.04);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

